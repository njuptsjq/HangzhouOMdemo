(function(a){if(typeof module==="object"&&module.exports){module.exports=a}else{a(Highcharts)}}(function(a){(function(b){var f=b.win,i=f.document,h=b.each,e=b.pick,k=b.inArray,j=b.isNumber,d=b.splat,c;var g=function(m,l){this.init(m,l)};b.extend(g.prototype,{init:function(l,m){this.options=l;this.chartOptions=m;this.columns=l.columns||this.rowsToColumns(l.rows)||[];this.firstRowAsNames=e(l.firstRowAsNames,true);this.decimalRegex=l.decimalPoint&&new RegExp("^(-?[0-9]+)"+l.decimalPoint+"([0-9]+)$");this.rawColumns=[];if(this.columns.length){this.dataFound()}else{this.parseCSV();this.parseTable();this.parseGoogleSpreadsheet()}},getColumnDistribution:function(){var p=this.chartOptions,u=this.options,n=[],m=function(w){return(b.seriesTypes[w||"line"].prototype.pointArrayMap||[0]).length},r=function(w){return b.seriesTypes[w||"line"].prototype.pointArrayMap},s=p&&p.chart&&p.chart.type,t=[],v=[],o=0,q;h((p&&p.series)||[],function(w){t.push(m(w.type||s))});h((u&&u.seriesMapping)||[],function(w){n.push(w.x||0)});if(n.length===0){n.push(0)}h((u&&u.seriesMapping)||[],function(z){var x=new c(),y,C=t[o]||m(s),B=(p&&p.series)||[],A=B[o]||{},w=r(A.type||s)||["y"];x.addColumnReader(z.x,"x");for(y in z){if(z.hasOwnProperty(y)&&y!=="x"){x.addColumnReader(z[y],y)}}for(q=0;q<C;q++){if(!x.hasReader(w[q])){x.addColumnReader(undefined,w[q])}}v.push(x);o++});var l=r(s);if(l===undefined){l=["y"]}this.valueCount={global:m(s),xColumns:n,individual:t,seriesBuilders:v,globalPointArrayMap:l}},dataFound:function(){if(this.options.switchRowsAndColumns){this.columns=this.rowsToColumns(this.columns)}this.getColumnDistribution();this.parseTypes();if(this.parsed()!==false){this.complete()}},parseCSV:function(){var t=this,v=this.options,o=v.csv,m=this.columns,s=v.startRow||0,n=v.endRow||Number.MAX_VALUE,l=v.startColumn||0,q=v.endColumn||Number.MAX_VALUE,r,u,p=0;if(o){u=o.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(v.lineDelimiter||"\n");r=v.itemDelimiter||(o.indexOf("\t")!==-1?"\t":",");h(u,function(x,A){var B=t.trim(x),z=B.indexOf("#")===0,w=B==="",y;if(A>=s&&A<=n&&!z&&!w){y=x.split(r);h(y,function(D,C){if(C>=l&&C<=q){if(!m[C-l]){m[C-l]=[]}m[C-l][p]=D}});p+=1}});this.dataFound()}},parseTable:function(){var n=this.options,q=n.table,o=this.columns,m=n.startRow||0,l=n.endRow||Number.MAX_VALUE,p=n.startColumn||0,r=n.endColumn||Number.MAX_VALUE;if(q){if(typeof q==="string"){q=i.getElementById(q)}h(q.getElementsByTagName("tr"),function(t,s){if(s>=m&&s<=l){h(t.children,function(v,u){if((v.tagName==="TD"||v.tagName==="TH")&&u>=p&&u<=r){if(!o[u-p]){o[u-p]=[]}o[u-p][s-m]=v.innerHTML}})}});this.dataFound()}},parseGoogleSpreadsheet:function(){var t=this,u=this.options,m=u.googleSpreadsheetKey,o=this.columns,s=u.startRow||0,p=u.endRow||Number.MAX_VALUE,n=u.startColumn||0,q=u.endColumn||Number.MAX_VALUE,l,r;if(m){jQuery.ajax({dataType:"json",url:"https://spreadsheets.google.com/feeds/cells/"+m+"/"+(u.googleSpreadsheetWorksheet||"od6")+"/public/values?alt=json-in-script&callback=?",error:u.error,success:function(z){var x=z.feed.entry,v,B=x.length,A=0,w=0,y;for(y=0;y<B;y++){v=x[y];A=Math.max(A,v.gs$cell.col);w=Math.max(w,v.gs$cell.row)}for(y=0;y<A;y++){if(y>=n&&y<=q){o[y-n]=[];o[y-n].length=Math.min(w,p-s)}}for(y=0;y<B;y++){v=x[y];l=v.gs$cell.row-1;r=v.gs$cell.col-1;if(r>=n&&r<=q&&l>=s&&l<=p){o[r-n][l-s]=v.content.$t}}h(o,function(C){for(y=0;y<C.length;y++){if(C[y]===undefined){C[y]=null}}});t.dataFound()}})}},trim:function(m,l){if(typeof m==="string"){m=m.replace(/^\s+|\s+$/g,"");if(l&&/^[0-9\s]+$/.test(m)){m=m.replace(/\s/g,"")}if(this.decimalRegex){m=m.replace(this.decimalRegex,"$1.$2")}}return m},parseTypes:function(){var m=this.columns,l=m.length;while(l--){this.parseColumn(m[l],l)}},parseColumn:function(n,p){var t=this.rawColumns,m=this.columns,r=n.length,D,w,A,B,s=this.firstRowAsNames,z=k(p,this.valueCount.xColumns)!==-1,y,o=[],v,x=this.chartOptions,C,l=this.options.columnTypes||[],u=l[p],q=z&&((x&&x.xAxis&&d(x.xAxis)[0].type==="category")||u==="string");if(!t[p]){t[p]=[]}while(r--){D=o[r]||n[r];A=this.trim(D);B=this.trim(D,true);w=parseFloat(B);if(t[p][r]===undefined){t[p][r]=A}if(q||(r===0&&s)){n[r]=A}else{if(+B===w){n[r]=w;if(w>365*24*3600*1000&&u!=="float"){n.isDatetime=true}else{n.isNumeric=true}if(n[r+1]!==undefined){C=w>n[r+1]}}else{y=this.parseDate(D);if(z&&j(y)&&u!=="float"){o[r]=D;n[r]=y;n.isDatetime=true;if(n[r+1]!==undefined){v=y>n[r+1];if(v!==C&&C!==undefined){if(this.alternativeFormat){this.dateFormat=this.alternativeFormat;r=n.length;this.alternativeFormat=this.dateFormats[this.dateFormat].alternative}else{n.unsorted=true}}C=v}}else{n[r]=A===""?null:A;if(r!==0&&(n.isDatetime||n.isNumeric)){n.mixed=true}}}}}if(z&&n.mixed){m[p]=t[p]}if(z&&C&&this.options.sort){for(p=0;p<m.length;p++){m[p].reverse();if(s){m[p].unshift(m[p].pop())}}}},dateFormats:{"YYYY-mm-dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{2})[\-\/\.]([0-9]{2})$/,parser:function(l){return Date.UTC(+l[1],l[2]-1,+l[3])}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(l){return Date.UTC(+l[3],l[2]-1,+l[1])},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(l){return Date.UTC(+l[3],l[1]-1,+l[2])}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(l){return Date.UTC(+l[3]+2000,l[2]-1,+l[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(l){return Date.UTC(+l[3]+2000,l[1]-1,+l[2])}}},parseDate:function(q){var r=this.options.parseDate,n,o,p,l=this.options.dateFormat||this.dateFormat,m;if(r){n=r(q)}else{if(typeof q==="string"){if(!l){for(o in this.dateFormats){p=this.dateFormats[o];m=q.match(p.regex);if(m){this.dateFormat=l=o;this.alternativeFormat=p.alternative;n=p.parser(m);break}}}else{p=this.dateFormats[l];m=q.match(p.regex);if(m){n=p.parser(m)}}if(!m){m=Date.parse(q);if(typeof m==="object"&&m!==null&&m.getTime){n=m.getTime()-m.getTimezoneOffset()*60000}else{if(j(m)){n=m-(new Date(m)).getTimezoneOffset()*60000}}}}}return n},rowsToColumns:function(p){var q,n,l,o,m;if(p){m=[];n=p.length;for(q=0;q<n;q++){o=p[q].length;for(l=0;l<o;l++){if(!m[l]){m[l]=[]}m[l][q]=p[q][l]}}}return m},parsed:function(){if(this.options.parsed){return this.options.parsed.call(this,this.columns)}},getFreeIndexes:function(m,l){var p,o,q=[],r=[],n;for(o=0;o<m;o=o+1){q.push(true)}for(p=0;p<l.length;p=p+1){n=l[p].getReferencedColumnIndexes();for(o=0;o<n.length;o=o+1){q[n[o]]=false}}for(o=0;o<q.length;o=o+1){if(q[o]){r.push(o)}}return r},complete:function(){var n=this.columns,o=[],z,B=this.options,u,t,v,s,l,q,p,y=[],w,A,m,x;o.length=n.length;if(B.complete||B.afterComplete){for(v=0;v<n.length;v++){if(this.firstRowAsNames){n[v].name=n[v].shift()}}u=[];A=this.getFreeIndexes(n.length,this.valueCount.seriesBuilders);for(q=0;q<this.valueCount.seriesBuilders.length;q++){w=this.valueCount.seriesBuilders[q];if(w.populateColumns(A)){y.push(w)}}while(A.length>0){w=new c();w.addColumnReader(0,"x");x=k(0,A);if(x!==-1){A.splice(x,1)}for(v=0;v<this.valueCount.global;v++){w.addColumnReader(undefined,this.valueCount.globalPointArrayMap[v])}if(w.populateColumns(A)){y.push(w)}}if(y.length>0&&y[0].readers.length>0){m=n[y[0].readers[0].columnIndex];if(m!==undefined){if(m.isDatetime){z="datetime"}else{if(!m.isNumeric){z="category"}}}}if(z==="category"){for(q=0;q<y.length;q++){w=y[q];for(l=0;l<w.readers.length;l++){if(w.readers[l].configName==="x"){w.readers[l].configName="name"}}}}for(q=0;q<y.length;q++){w=y[q];t=[];for(s=0;s<n[0].length;s++){t[s]=w.read(n,s)}u[q]={data:t};if(w.name){u[q].name=w.name}if(z==="category"){u[q].turboThreshold=0}}p={series:u};if(z){p.xAxis={type:z};if(z==="category"){p.xAxis.uniqueNames=false}}if(B.complete){B.complete(p)}if(B.afterComplete){B.afterComplete(p)}}}});b.Data=g;b.data=function(l,m){return new g(l,m)};b.wrap(b.Chart.prototype,"init",function(m,n,o){var l=this;if(n&&n.data){b.data(b.extend(n.data,{afterComplete:function(r){var q,p;if(n.hasOwnProperty("series")){if(typeof n.series==="object"){q=Math.max(n.series.length,r.series.length);while(q--){p=n.series[q]||{};n.series[q]=b.merge(p,r.series[q])}}else{delete n.series}}n=b.merge(r,n);m.call(l,n,o)}}),n)}else{m.call(l,n,o)}});c=function(){this.readers=[];this.pointIsArray=true};c.prototype.populateColumns=function(n){var l=this,m=true;h(l.readers,function(o){if(o.columnIndex===undefined){o.columnIndex=n.shift()}});h(l.readers,function(o){if(o.columnIndex===undefined){m=false}});return m};c.prototype.read=function(o,q){var n=this,p=n.pointIsArray,l=p?[]:{},m;h(n.readers,function(r){var s=o[r.columnIndex][q];if(p){l.push(s)}else{l[r.configName]=s}});if(this.name===undefined&&n.readers.length>=2){m=n.getReferencedColumnIndexes();if(m.length>=2){m.shift();m.sort();this.name=o[m.shift()].name}}return l};c.prototype.addColumnReader=function(l,m){this.readers.push({columnIndex:l,configName:m});if(!(m==="x"||m==="y"||m===undefined)){this.pointIsArray=false}};c.prototype.getReferencedColumnIndexes=function(){var m,l=[],n;for(m=0;m<this.readers.length;m=m+1){n=this.readers[m];if(n.columnIndex!==undefined){l.push(n.columnIndex)}}return l};c.prototype.hasReader=function(n){var l,m;for(l=0;l<this.readers.length;l=l+1){m=this.readers[l];if(m.configName===n){return true}}}}(a))}));