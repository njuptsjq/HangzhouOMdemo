(function(a){if(typeof module==="object"&&module.exports){module.exports=a}else{a(Highcharts)}}(function(a){(function(k){var g=k.noop,m=k.color,s=k.defaultOptions,h=k.each,r=k.extend,n=k.format,i=k.pick,j=k.wrap,q=k.Chart,t=k.seriesTypes,o=t.pie,e=t.column,c=k.Tick,u=k.fireEvent,p=k.inArray,l=1;function d(z,y,x){var w,v;if(!y.rgba.length||!z.rgba.length){v=y.input||"none"}else{z=z.rgba;y=y.rgba;w=(y[3]!==1||z[3]!==1);v=(w?"rgba(":"rgb(")+Math.round(y[0]+(z[0]-y[0])*(1-x))+","+Math.round(y[1]+(z[1]-y[1])*(1-x))+","+Math.round(y[2]+(z[2]-y[2])*(1-x))+(w?(","+(y[3]+(z[3]-y[3])*(1-x))):"")+")"}return v}h(["fill","stroke"],function(v){k.Fx.prototype[v+"Setter"]=function(){this.elem.attr(v,d(m(this.start),m(this.end),this.pos),null,true)}});r(s.lang,{drillUpText:"◁ Back to {series.name}"});s.drilldown={animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}};k.SVGRenderer.prototype.Element.prototype.fadeIn=function(v){this.attr({opacity:0.1,visibility:"inherit"}).animate({opacity:i(this.newOpacity,1)},v||{duration:250})};q.prototype.addSeriesAsDrilldown=function(v,w){this.addSingleSeriesAsDrilldown(v,w);this.applyDrilldown()};q.prototype.addSingleSeriesAsDrilldown=function(E,H){var B=E.series,y=B.xAxis,w=B.yAxis,C,D,A=[],z=[],v,x,F,G;G={colorIndex:i(E.colorIndex,B.colorIndex)};if(!this.drilldownLevels){this.drilldownLevels=[]}x=B.options._levelNumber||0;F=this.drilldownLevels[this.drilldownLevels.length-1];if(F&&F.levelNumber!==x){F=undefined}H=r(r({_ddSeriesId:l++},G),H);D=p(E,B.points);h(B.chart.series,function(I){if(I.xAxis===y&&!I.isDrilling){I.options._ddSeriesId=I.options._ddSeriesId||l++;I.options._colorIndex=I.userOptions._colorIndex;I.options._levelNumber=I.options._levelNumber||x;if(F){A=F.levelSeries;z=F.levelSeriesOptions}else{A.push(I);z.push(I.options)}}});v=r({levelNumber:x,seriesOptions:B.options,levelSeriesOptions:z,levelSeries:A,shapeArgs:E.shapeArgs,bBox:E.graphic?E.graphic.getBBox():{},color:E.isNull?new k.Color(m).setOpacity(0).get():m,lowerSeriesOptions:H,pointOptions:B.options.data[D],pointIndex:D,oldExtremes:{xMin:y&&y.userMin,xMax:y&&y.userMax,yMin:w&&w.userMin,yMax:w&&w.userMax}},G);this.drilldownLevels.push(v);C=v.lowerSeries=this.addSeries(H,false);C.options._levelNumber=x+1;if(y){y.oldPos=y.pos;y.userMin=y.userMax=null;w.userMin=w.userMax=null}if(B.type===C.type){C.animate=C.animateDrilldown||g;C.options.animation=true}};q.prototype.applyDrilldown=function(){var w=this.drilldownLevels,v;if(w&&w.length>0){v=w[w.length-1].levelNumber;h(this.drilldownLevels,function(x){if(x.levelNumber===v){h(x.levelSeries,function(y){if(y.options&&y.options._levelNumber===v){y.remove(false)}})}})}this.redraw();this.showDrillUpButton()};q.prototype.getDrilldownBackText=function(){var w=this.drilldownLevels,v;if(w&&w.length>0){v=w[w.length-1];v.series=v.seriesOptions;return n(this.options.lang.drillUpText,v)}};q.prototype.showDrillUpButton=function(){var x=this,y=this.getDrilldownBackText(),z=x.options.drilldown.drillUpButton,v,w;if(!this.drillUpButton){v=z.theme;w=v&&v.states;this.drillUpButton=this.renderer.button(y,null,null,function(){x.drillUp()},v,w&&w.hover,w&&w.select).addClass("highcharts-drillup-button").attr({align:z.position.align,zIndex:7}).add().align(z.position,false,z.relativeTo||"plotBox")}else{this.drillUpButton.attr({text:y}).align()}};q.prototype.drillUp=function(){var C=this,x=C.drilldownLevels,w=x[x.length-1].levelNumber,z=x.length,F=C.series,E,v,A,B,y,D=function(G){var H;h(F,function(I){if(I.options._ddSeriesId===G._ddSeriesId){H=I}});H=H||C.addSeries(G,false);if(H.type===A.type&&H.animateDrillupTo){H.animate=H.animateDrillupTo}if(G===v.seriesOptions){B=H}};while(z--){v=x[z];if(v.levelNumber===w){x.pop();A=v.lowerSeries;if(!A.chart){E=F.length;while(E--){if(F[E].options.id===v.lowerSeriesOptions.id&&F[E].options._levelNumber===w+1){A=F[E];break}}}A.xData=[];h(v.levelSeriesOptions,D);u(C,"drillup",{seriesOptions:v.seriesOptions});if(B.type===A.type){B.drilldownLevel=v;B.options.animation=C.options.drilldown.animation;if(A.animateDrillupFrom&&A.chart){A.animateDrillupFrom(v)}}B.options._levelNumber=w;A.remove(false);if(B.xAxis){y=v.oldExtremes;B.xAxis.setExtremes(y.xMin,y.xMax,false);B.yAxis.setExtremes(y.yMin,y.yMax,false)}}}u(C,"drillupall");this.redraw();if(this.drilldownLevels.length===0){this.drillUpButton=this.drillUpButton.destroy()}else{this.drillUpButton.attr({text:this.getDrilldownBackText()}).align()}this.ddDupes.length=[]};e.prototype.supportsDrilldown=true;e.prototype.animateDrillupTo=function(w){if(!w){var v=this,x=v.drilldownLevel;h(this.points,function(y){if(y.graphic){y.graphic.hide()}if(y.dataLabel){y.dataLabel.hide()}if(y.connector){y.connector.hide()}});setTimeout(function(){if(v.points){h(v.points,function(y,A){var B=A===(x&&x.pointIndex)?"show":"fadeIn",z=B==="show"?true:undefined;if(y.graphic){y.graphic[B](z)}if(y.dataLabel){y.dataLabel[B](z)}if(y.connector){y.connector[B](z)}})}},Math.max(this.chart.options.drilldown.animation.duration-50,0));this.animate=g}};e.prototype.animateDrilldown=function(z){var v=this,A=this.chart.drilldownLevels,w,y=this.chart.options.drilldown.animation,x=this.xAxis;if(!z){h(A,function(B){if(v.options._ddSeriesId===B.lowerSeriesOptions._ddSeriesId){w=B.shapeArgs}});w.x+=(i(x.oldPos,x.pos)-x.pos);h(this.points,function(B){var C=B.shapeArgs;if(B.graphic){B.graphic.attr(w).animate(r(B.shapeArgs,{fill:B.color||v.color}),y)}if(B.dataLabel){B.dataLabel.fadeIn(y)}});this.animate=null}};e.prototype.animateDrillupFrom=function(y){var x=this.chart.options.drilldown.animation,w=this.group,v=this;h(v.trackerGroups,function(z){if(v[z]){v[z].on("mouseover")}});delete this.group;h(this.points,function(z){var C=z.graphic,B=y.shapeArgs,A=function(){C.destroy();if(w){w=w.destroy()}};if(C){delete z.graphic;if(x){C.animate(B,k.merge(x,{complete:A}))}else{C.attr(B);A()}}})};if(o){r(o.prototype,{supportsDrilldown:true,animateDrillupTo:e.prototype.animateDrillupTo,animateDrillupFrom:e.prototype.animateDrillupFrom,animateDrilldown:function(z){var B=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],x=this.chart.options.drilldown.animation,w=B.shapeArgs,A=w.start,y=w.end-A,v=y/this.points.length;if(!z){h(this.points,function(C,E){var D=C.shapeArgs;if(C.graphic){C.graphic.attr(k.merge(w,{start:A+E*v,end:A+(E+1)*v}))[x?"animate":"attr"](D,x)}});this.animate=null}}})}k.Point.prototype.doDrilldown=function(y,C,v){var A=this.series,B=A.chart,w=B.options.drilldown,z=(w.series||[]).length,x;if(!B.ddDupes){B.ddDupes=[]}while(z--&&!x){if(w.series[z].id===this.drilldown&&p(this.drilldown,B.ddDupes)===-1){x=w.series[z];B.ddDupes.push(this.drilldown)}}u(B,"drilldown",{point:this,seriesOptions:x,category:C,originalEvent:v,points:C!==undefined&&this.series.xAxis.getDDPoints(C).slice(0)},function(F){var E=F.point.series&&F.point.series.chart,D=F.seriesOptions;if(E&&D){if(y){E.addSingleSeriesAsDrilldown(F.point,D)}else{E.addSeriesAsDrilldown(F.point,D)}}})};k.Axis.prototype.drilldownCategory=function(w,z){var y,v,A=this.getDDPoints(w);for(y in A){v=A[y];if(v&&v.series&&v.series.visible&&v.doDrilldown){v.doDrilldown(true,w,z)}}this.chart.applyDrilldown()};k.Axis.prototype.getDDPoints=function(v){var w=[];h(this.series,function(y){var x,A=y.xData,z=y.points;for(x=0;x<A.length;x++){if(A[x]===v&&y.options.data[x]&&y.options.data[x].drilldown){w.push(z?z[x]:true);break}}});return w};c.prototype.drillable=function(){var z=this.pos,v=this.label,w=this.axis,x=w.coll==="xAxis"&&w.getDDPoints,y=x&&w.getDDPoints(z);if(x){if(v&&y.length){v.drillable=true;v.addClass("highcharts-drilldown-axis-label").on("click",function(A){w.drilldownCategory(z,A)})}else{if(v&&v.drillable){v.on("click",null);v.removeClass("highcharts-drilldown-axis-label")}}}};j(c.prototype,"addLabel",function(v){v.call(this);this.drillable()});j(k.Point.prototype,"init",function(B,A,y,w){var v=B.call(this,A,y,w),C=A.xAxis,z=C&&C.ticks[w];if(v.drilldown){k.addEvent(v,"click",function(x){if(A.xAxis&&A.chart.options.drilldown.allowPointDrilldown===false){A.xAxis.drilldownCategory(v.x,x)}else{v.doDrilldown(undefined,undefined,x)}})}if(z){z.drillable()}return v});j(k.Series.prototype,"drawDataLabels",function(w){var v=this.chart.options.drilldown.activeDataLabelStyle,x=this.chart.renderer;w.call(this);h(this.points,function(y){var z={};if(y.drilldown&&y.dataLabel){if(v.color==="contrast"){z.color=x.getContrast(y.color||this.color)}y.dataLabel.addClass("highcharts-drilldown-data-label")}},this)});var f,b=function(v){v.call(this);h(this.points,function(w){if(w.drilldown&&w.graphic){w.graphic.addClass("highcharts-drilldown-point")}})};for(f in t){if(t[f].prototype.supportsDrilldown){j(t[f].prototype,"drawTracker",b)}}}(a))}));