(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(q){var k=q.Axis,C=q.Chart,i=q.color,d,o=q.each,z=q.extend,s=q.isNumber,f=q.Legend,j=q.LegendSymbolMixin,p=q.noop,c=q.merge,A=q.pick,B=q.wrap;d=q.ColorAxis=function(){this.init.apply(this,arguments)};z(d.prototype,k.prototype);z(d.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:0.01},labels:{overflow:"justify"},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0},keepProps:["legendGroup","legendItem","legendSymbol"].concat(k.prototype.keepProps),init:function(b,h){var g="vertical"!==b.options.legend.layout,e;this.coll="colorAxis";e=c(this.defaultColorAxisOptions,{side:g?2:1,reversed:!g},h,{opposite:!g,showEmpty:!1,title:null});k.prototype.init.call(this,b,e);h.dataClasses&&this.initDataClasses(h);this.initStops(h);this.horiz=g;this.zoomEnabled=!1;this.defaultLegendLength=200},tweenColors:function(b,h,g){var e;h.rgba.length&&b.rgba.length?(b=b.rgba,h=h.rgba,e=1!==h[3]||1!==b[3],b=(e?"rgba(":"rgb(")+Math.round(h[0]+(b[0]-h[0])*(1-g))+","+Math.round(h[1]+(b[1]-h[1])*(1-g))+","+Math.round(h[2]+(b[2]-h[2])*(1-g))+(e?","+(h[3]+(b[3]-h[3])*(1-g)):"")+")"):b=h.input||"none";return b},initDataClasses:function(g){var r=this,n,m=0,l=this.chart.options.chart.colorCount,e=this.options,h=g.dataClasses.length;this.dataClasses=n=[];this.legendItems=[];o(g.dataClasses,function(b,t){b=c(b);n.push(b);b.color||("category"===e.dataClassColor?(b.colorIndex=m,m++,m===l&&(m=0)):b.color=r.tweenColors(i(e.minColor),i(e.maxColor),2>h?0.5:t/(h-1)))})},initStops:function(b){this.stops=b.stops||[[0,this.options.minColor],[1,this.options.maxColor]];o(this.stops,function(e){e.color=i(e[1])})},setOptions:function(b){k.prototype.setOptions.call(this,b);this.options.crosshair=this.options.marker},setAxisSize:function(){var b=this.legendSymbol,l=this.chart,h=l.options.legend||{},g,e;b?(this.left=h=b.attr("x"),this.top=g=b.attr("y"),this.width=e=b.attr("width"),this.height=b=b.attr("height"),this.right=l.chartWidth-h-e,this.bottom=l.chartHeight-g-b,this.len=this.horiz?e:b,this.pos=this.horiz?h:g):this.len=(this.horiz?h.symbolWidth:h.symbolHeight)||this.defaultLegendLength},toColor:function(h,u){var t=this.stops,n,m,g=this.dataClasses,l,r;if(g){for(r=g.length;r--;){if(l=g[r],n=l.from,t=l.to,(void 0===n||h>=n)&&(void 0===t||h<=t)){m=l.color;u&&(u.dataClass=r,u.colorIndex=l.colorIndex);break}}}else{this.isLog&&(h=this.val2lin(h));h=1-(this.max-h)/(this.max-this.min||1);for(r=t.length;r--&&!(h>t[r][0]);){}n=t[r]||t[r+1];t=t[r+1]||n;h=1-(t[0]-h)/(t[0]-n[0]||1);m=this.tweenColors(n.color,t.color,h)}return m},getOffset:function(){var b=this.legendGroup,e=this.chart.axisOffset[this.side];b&&(this.axisParent=b,k.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=e)},setLegendColor:function(){var b,g=this.options,e=this.reversed;b=e?1:0;e=e?0:1;b=this.horiz?[b,0,e,0]:[0,e,0,b];this.legendColor={linearGradient:{x1:b[0],y1:b[1],x2:b[2],y2:b[3]},stops:g.stops||[[0,g.minColor],[1,g.maxColor]]}},drawLegendSymbol:function(l,v){var u=l.padding,r=l.options,g=this.horiz,t=A(r.symbolWidth,g?this.defaultLegendLength:12),m=A(r.symbolHeight,g?12:this.defaultLegendLength),n=A(r.labelPadding,g?16:30),r=A(r.itemDistance,10);this.setLegendColor();v.legendSymbol=this.chart.renderer.rect(0,l.baseline-11,t,m).attr({zIndex:1}).add(v.legendGroup);this.legendItemWidth=t+u+(g?r:n);this.legendItemHeight=m+u+(g?n:0)},setState:p,visible:!0,setVisible:p,getSeriesExtremes:function(){var b;this.series.length&&(b=this.series[0],this.dataMin=b.valueMin,this.dataMax=b.valueMax)},drawCrosshair:function(l,u){var t=u&&u.plotX,g=u&&u.plotY,r,n=this.pos,m=this.len;u&&(r=this.toPixels(u[u.series.colorKey]),r<n?r=n-2:r>n+m&&(r=n+m+2),u.plotX=r,u.plotY=this.len-r,k.prototype.drawCrosshair.call(this,l,u),u.plotX=t,u.plotY=g,this.cross&&this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup))},getPlotLinePath:function(h,n,m,g,l){return s(l)?this.horiz?["M",l-4,this.top-6,"L",l+4,this.top-6,l,this.top,"Z"]:["M",this.left,l,"L",this.left-6,l+6,this.left-6,l-6,"Z"]:k.prototype.getPlotLinePath.call(this,h,n,m,g)},update:function(g,l){var h=this.chart,e=h.legend;o(this.series,function(b){b.isDirtyData=!0});g.dataClasses&&e.allItems&&(o(e.allItems,function(b){b.isDataClass&&b.legendGroup.destroy()}),h.isDirtyLegend=!0);h.options[this.coll]=c(this.userOptions,g);k.prototype.update.call(this,g,l);this.legendItem&&(this.setLegendColor(),e.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var b=this,r=this.chart,l=this.legendItems,h=r.options.legend,m=h.valueDecimals,g=h.valueSuffix||"",e;l.length||o(this.dataClasses,function(w,n){var v=!0,u=w.from,t=w.to;e="";void 0===u?e="\x3c ":void 0===t&&(e="\x3e ");void 0!==u&&(e+=q.numberFormat(u,m)+g);void 0!==u&&void 0!==t&&(e+=" - ");void 0!==t&&(e+=q.numberFormat(t,m)+g);l.push(z({chart:r,name:e,options:{},drawLegendSymbol:j.drawRectangle,visible:!0,setState:p,isDataClass:!0,setVisible:function(){v=this.visible=!v;o(b.series,function(x){o(x.points,function(y){y.dataClass===n&&y.setVisible(v)})});r.legend.colorizeItem(this,v)}},w))});return l},name:""});o(["fill","stroke"],function(b){q.Fx.prototype[b+"Setter"]=function(){this.elem.attr(b,d.prototype.tweenColors(i(this.start),i(this.end),this.pos),null,!0)}});B(C.prototype,"getAxes",function(b){var e=this.options.colorAxis;b.call(this);this.colorAxis=[];e&&new d(this,e)});B(f.prototype,"getAllItems",function(b){var g=[],e=this.chart.colorAxis[0];e&&e.options&&(e.options.showInLegend&&(e.options.dataClasses?g=g.concat(e.getDataClassLegendSymbols()):g.push(e)),o(e.series,function(h){h.options.showInLegend=!1}));return g.concat(b.call(this))});B(f.prototype,"colorizeItem",function(b,g,e){b.call(this,g,e);e&&g.legendColor&&g.legendSymbol.attr({fill:g.legendColor})})})(a);(function(c){var f=c.defined,e=c.each,d=c.noop;c.colorPointMixin={isValid:function(){return null!==this.value},setVisible:function(h){var j=this,i=h?"show":"hide";e(["graphic","dataLabel"],function(g){if(j[g]){j[g][i]()}})}};c.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:d,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var h=this,k=this.options.nullColor,j=this.colorAxis,i=this.colorKey;e(this.data,function(b){var g=b[i];if(g=b.options.color||(b.isNull?k:j&&void 0!==g?j.toColor(g,b):b.color||h.color)){b.color=g}})},colorAttribs:function(g){var h={};f(g.color)&&(h[this.colorProp||"fill"]=g.color);return h}}})(a);(function(k){var i=k.colorPointMixin,q=k.each,h=k.merge,d=k.noop,j=k.pick,c=k.Series,o=k.seriesType,f=k.seriesTypes;o("heatmap","scatter",{animation:!1,borderWidth:0,dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}\x3cbr/\x3e"},states:{normal:{animation:!0},hover:{halo:!1,brightness:0.2}}},h(k.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var e;f.scatter.prototype.init.apply(this,arguments);e=this.options;e.pointRange=j(e.pointRange,e.colsize||1);this.yAxis.axisPointRange=e.rowsize||1},translate:function(){var m=this.options,r=this.xAxis,p=this.yAxis,n=function(e,g,l){return Math.min(Math.max(g,e),l)};this.generatePoints();q(this.points,function(e){var b=(m.colsize||1)/2,s=(m.rowsize||1)/2,l=n(Math.round(r.len-r.translate(e.x-b,0,1,0,1)),-r.len,2*r.len),b=n(Math.round(r.len-r.translate(e.x+b,0,1,0,1)),-r.len,2*r.len),g=n(Math.round(p.translate(e.y-s,0,1,0,1)),-p.len,2*p.len),s=n(Math.round(p.translate(e.y+s,0,1,0,1)),-p.len,2*p.len);e.plotX=e.clientX=(l+b)/2;e.plotY=(g+s)/2;e.shapeType="rect";e.shapeArgs={x:Math.min(l,b),y:Math.min(g,s),width:Math.abs(b-l),height:Math.abs(s-g)}});this.translateColors()},drawPoints:function(){f.column.prototype.drawPoints.call(this);q(this.points,function(e){e.graphic.attr(this.colorAttribs(e,e.state))},this)},animate:d,getBox:d,drawLegendSymbol:k.LegendSymbolMixin.drawRectangle,alignDataLabel:f.column.prototype.alignDataLabel,getExtremes:function(){c.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;c.prototype.getExtremes.call(this)}}),i)})(a)});