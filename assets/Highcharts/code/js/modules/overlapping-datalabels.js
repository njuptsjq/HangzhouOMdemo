(function(b){"object"===typeof module&&module.exports?module.exports=b:b(Highcharts)})(function(b){(function(c){var e=c.Chart,d=c.each,g=c.pick,f=c.addEvent;e.prototype.callbacks.push(function(i){function h(){var j=[];d(i.series,function(a){var l=a.options.dataLabels,k=a.dataLabelCollections||["dataLabel"];(l.enabled||a._hasPointLabels)&&!l.allowOverlap&&a.visible&&d(k,function(m){d(a.points,function(n){n[m]&&(n[m].labelrank=g(n.labelrank,n.shapeArgs&&n.shapeArgs.height),j.push(n[m]))})})});i.hideOverlappingLabels(j)}h();f(i,"redraw",h)});e.prototype.hideOverlappingLabels=function(x){var s=x.length,t,w,v,u,o,k,j,i,r,q=function(m,l,B,A,z,y,p,n){return !(z>m+B||z+p<m||y>l+A||y+n<l)};for(w=0;w<s;w++){if(t=x[w]){t.oldOpacity=t.opacity,t.newOpacity=1}}x.sort(function(l,h){return(h.labelrank||0)-(l.labelrank||0)});for(w=0;w<s;w++){for(v=x[w],t=w+1;t<s;++t){if(u=x[t],v&&u&&v.placed&&u.placed&&0!==v.newOpacity&&0!==u.newOpacity&&(o=v.alignAttr,k=u.alignAttr,j=v.parentGroup,i=u.parentGroup,r=2*(v.box?0:v.padding),o=q(o.x+j.translateX,o.y+j.translateY,v.width-r,v.height-r,k.x+i.translateX,k.y+i.translateY,u.width-r,u.height-r))){(v.labelrank<u.labelrank?v:u).newOpacity=0}}}d(x,function(l){var h,m;l&&(m=l.newOpacity,l.oldOpacity!==m&&l.placed&&(m?l.show(!0):h=function(){l.hide()},l.alignAttr.opacity=m,l[l.isOld?"animate":"attr"](l.alignAttr,null,h)),l.isOld=!0)})}})(b)});