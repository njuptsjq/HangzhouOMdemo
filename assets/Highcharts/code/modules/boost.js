(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(C){function t(l,d,v,u,p){p=p||0;u=u||50000;for(var n=p+u,q=!0;q&&p<n&&p<l.length;){q=d(l[p],p),p+=1}q&&(p<l.length?setTimeout(function(){t(l,d,v,u,p)}):v&&v())}var m=C.win.document,i=function(){},h=C.Color,B=C.Series,D=C.seriesTypes,w=C.each,k=C.extend,g=C.addEvent,e=C.fireEvent,j=C.grep,s=C.isNumber,c=C.merge,b=C.pick,A=C.wrap,r=C.getOptions().plotOptions,o;w("area arearange bubble column line scatter".split(" "),function(d){r[d]&&(r[d].boostThreshold=5000)});w(["translate","generatePoints","drawTracker","drawPoints","render"],function(f){function d(l){var n=this.options.stacking&&("translate"===f||"generatePoints"===f);if((this.processedXData||this.options.data).length<(this.options.boostThreshold||Number.MAX_VALUE)||n){"render"===f&&this.image&&(this.image.attr({href:""}),this.animate=null),l.call(this)}else{if(this[f+"Canvas"]){this[f+"Canvas"]()}}}A(B.prototype,f,d);"translate"===f&&w(["arearange","bubble","column"],function(l){D[l]&&A(D[l].prototype,f,d)})});A(B.prototype,"getExtremes",function(d){this.hasExtremes()||d.apply(this,Array.prototype.slice.call(arguments,1))});A(B.prototype,"setData",function(d){this.hasExtremes(!0)||d.apply(this,Array.prototype.slice.call(arguments,1))});A(B.prototype,"processData",function(d){this.hasExtremes(!0)||d.apply(this,Array.prototype.slice.call(arguments,1))});C.extend(B.prototype,{pointRange:0,allowDG:!1,hasExtremes:function(f){var d=this.options,n=this.xAxis&&this.xAxis.options,l=this.yAxis&&this.yAxis.options;return d.data.length>(d.boostThreshold||Number.MAX_VALUE)&&s(l.min)&&s(l.max)&&(!f||s(n.min)&&s(n.max))},destroyGraphics:function(){var f=this,d=this.points,n,l;if(d){for(l=0;l<d.length;l+=1){(n=d[l])&&n.graphic&&(n.graphic=n.graphic.destroy())}}w(["graph","area","tracker"],function(p){f[p]&&(f[p]=f[p].destroy())})},getContext:function(){var f=this.chart,d=f.plotWidth,p=f.plotHeight,n=this.ctx,l=function(u,q,E,y,v,x,z){u.call(this,E,q,y,v,x,z)};this.canvas?n.clearRect(0,0,d,p):(this.canvas=m.createElement("canvas"),this.image=f.renderer.image("",0,0,d,p).add(this.group),this.ctx=n=this.canvas.getContext("2d"),f.inverted&&w(["moveTo","lineTo","rect","arc"],function(q){A(n,q,l)}));this.canvas.width=d;this.canvas.height=p;this.image.attr({width:d,height:p});return n},canvasToSVG:function(){this.image.attr({href:this.canvas.toDataURL("image/png")})},cvsLineTo:function(f,d,l){f.lineTo(d,l)},renderCanvas:function(){var aI=this,aH=aI.options,aG=aI.chart,aE=this.xAxis,aD=this.yAxis,aC,aF=0,aB=aI.processedXData,az=aI.processedYData,ay=aH.data,aA=aE.getExtremes(),av=aA.min,at=aA.max,aA=aD.getExtremes(),ar=aA.min,al=aA.max,ae={},ak,aJ=!!aI.sampling,ad,aj=aH.marker&&aH.marker.radius,ac=this.cvsDrawPoint,ai=aH.lineWidth?this.cvsLineTo:!1,ab=aj&&1>=aj?this.cvsMarkerSquare:this.cvsMarkerCircle,ao=this.cvsStrokeBatch||1000,am=!1!==aH.enableMouseTracking,Z,aA=aH.threshold,ax=aD.getThreshold(aA),Y=s(aA),X=ax,f=this.fill,W=aI.pointArrayMap&&"low,high"===aI.pointArrayMap.join(","),V=!!aH.stacking,ap=aI.cropStart||0,aA=aG.options.loading,an=aI.requireSorting,U,q=aH.connectNulls,G=!aB,ah,ag,aw,au,aq=aI.fillOpacity?(new h(aI.color)).setOpacity(b(aH.fillOpacity,0.75)).get():aI.color,y=function(){f?(aC.fillStyle=aq,aC.fill()):(aC.strokeStyle=aI.color,aC.lineWidth=aH.lineWidth,aC.stroke())},u=function(d,p,n,l){0===aF&&(aC.beginPath(),ai&&(aC.lineJoin="round"));U?aC.moveTo(d,p):ac?ac(aC,d,p,n,Z):ai?ai(aC,d,p):ab&&ab.call(aI,aC,d,p,aj,l);aF+=1;aF===ao&&(y(),aF=0);Z={clientX:d,plotY:p,yBottom:n}},af=function(l,d,n){am&&!ae[l+","+d]&&(ae[l+","+d]=!0,aG.inverted&&(l=aE.len-l,d=aD.len-d),ad.push({clientX:l,plotX:l,plotY:d,i:ap+n}))};(this.points||this.graph)&&this.destroyGraphics();aI.plotGroup("group","series",aI.visible?"visible":"hidden",aH.zIndex,aG.seriesGroup);aI.markerGroup=aI.group;g(aI,"destroy",function(){aI.markerGroup=null});ad=this.points=[];aC=this.getContext();aI.buildKDTree=i;99999<ay.length&&(aG.options.loading=c(aA,{labelStyle:{backgroundColor:C.color("#ffffff").setOpacity(0.75).get(),padding:"1em",borderRadius:"0.5em"},style:{backgroundColor:"none",opacity:1}}),clearTimeout(o),aG.showLoading("Drawing..."),aG.options.loading=aA);t(V?aI.data:aB||ay,function(p,E){var F,z,x,v="undefined"===typeof aG.index,n=!0;if(!v){G?(F=p[0],z=p[1]):(F=p,z=az[E]);W?(G&&(z=p.slice(1,3)),x=z[0],z=z[1]):V&&(F=p.x,z=p.stackY,x=z-p.y);p=null===z;an||(n=z>=ar&&z<=al);if(!p&&F>=av&&F<=at&&n){if(F=Math.round(aE.toPixels(F,!0)),aJ){if(void 0===aw||F===ak){W||(x=z);if(void 0===au||z>ag){ag=z,au=E}if(void 0===aw||x<ah){ah=x,aw=E}}F!==ak&&(void 0!==aw&&(z=aD.toPixels(ag,!0),ax=aD.toPixels(ah,!0),u(F,Y?Math.min(z,X):z,Y?Math.max(ax,X):ax,E),af(F,z,au),ax!==z&&af(F,ax,aw)),aw=au=void 0,ak=F)}else{z=Math.round(aD.toPixels(z,!0)),u(F,z,ax,E),af(F,z,E)}}U=p&&!q;0===E%50000&&aI.canvasToSVG()}return !v},function(){var d=aG.loadingDiv,l=aG.loadingShown;y();aI.canvasToSVG();e(aI,"renderedCanvas");l&&(k(d.style,{transition:"opacity 250ms",opacity:0}),aG.loadingShown=!1,o=setTimeout(function(){d.parentNode&&d.parentNode.removeChild(d);aG.loadingDiv=aG.loadingSpan=null},250));aI.directTouch=!1;aI.options.stickyTracking=!0;delete aI.buildKDTree;aI.buildKDTree()},aG.renderer.forExport?Number.MAX_VALUE:void 0)}});D.scatter.prototype.cvsMarkerCircle=function(f,d,n,l){f.moveTo(d,n);f.arc(d,n,l,0,2*Math.PI,!1)};D.scatter.prototype.cvsMarkerSquare=function(f,d,n,l){f.rect(d-l,n-l,2*l,2*l)};D.scatter.prototype.fill=!0;D.bubble&&(D.bubble.prototype.cvsMarkerCircle=function(l,f,q,n,p){l.moveTo(f,q);l.arc(f,q,this.radii&&this.radii[p],0,2*Math.PI,!1)},D.bubble.prototype.cvsStrokeBatch=1);k(D.area.prototype,{cvsDrawPoint:function(l,f,q,n,p){p&&f!==p.clientX&&(l.moveTo(p.clientX,p.yBottom),l.lineTo(p.clientX,p.plotY),l.lineTo(f,q),l.lineTo(f,n))},fill:!0,fillOpacity:!0,sampling:!0});k(D.column.prototype,{cvsDrawPoint:function(l,f,p,n){l.rect(f-1,p,1,n-p)},fill:!0,sampling:!0});B.prototype.getPoint=function(f){var d=f;!f||f instanceof this.pointClass||(d=(new this.pointClass).init(this,this.options.data[f.i]),d.category=d.x,d.dist=f.dist,d.distX=f.distX,d.plotX=f.plotX,d.plotY=f.plotY);return d};A(B.prototype,"destroy",function(f){var d=this,l=d.chart;l.hoverPoints&&(l.hoverPoints=j(l.hoverPoints,function(n){return n.series===d}));l.hoverPoint&&l.hoverPoint.series===d&&(l.hoverPoint=null);f.call(this)});A(B.prototype,"searchPoint",function(d){return this.getPoint(d.apply(this,[].slice.call(arguments,1)))})})(a)});