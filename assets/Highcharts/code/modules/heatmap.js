(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(s){var n=s.Axis,c=s.Chart,i=s.color,j,o=s.each,A=s.extend,z=s.isNumber,f=s.Legend,l=s.LegendSymbolMixin,y=s.noop,d=s.merge,B=s.pick,C=s.wrap;j=s.ColorAxis=function(){this.init.apply(this,arguments)};A(j.prototype,n.prototype);A(j.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:0.01,color:"#999999"},labels:{overflow:"justify"},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0},keepProps:["legendGroup","legendItem","legendSymbol"].concat(n.prototype.keepProps),init:function(b,h){var g="vertical"!==b.options.legend.layout,e;this.coll="colorAxis";e=d(this.defaultColorAxisOptions,{side:g?2:1,reversed:!g},h,{opposite:!g,showEmpty:!1,title:null});n.prototype.init.call(this,b,e);h.dataClasses&&this.initDataClasses(h);this.initStops(h);this.horiz=g;this.zoomEnabled=!1;this.defaultLegendLength=200},tweenColors:function(b,h,g){var e;h.rgba.length&&b.rgba.length?(b=b.rgba,h=h.rgba,e=1!==h[3]||1!==b[3],b=(e?"rgba(":"rgb(")+Math.round(h[0]+(b[0]-h[0])*(1-g))+","+Math.round(h[1]+(b[1]-h[1])*(1-g))+","+Math.round(h[2]+(b[2]-h[2])*(1-g))+(e?","+(h[3]+(b[3]-h[3])*(1-g)):"")+")"):b=h.input||"none";return b},initDataClasses:function(k){var t=this,q=this.chart,p,g=0,e=q.options.chart.colorCount,r=this.options,m=k.dataClasses.length;this.dataClasses=p=[];this.legendItems=[];o(k.dataClasses,function(b,h){b=d(b);p.push(b);b.color||("category"===r.dataClassColor?(h=q.options.colors,e=h.length,b.color=h[g],b.colorIndex=g,g++,g===e&&(g=0)):b.color=t.tweenColors(i(r.minColor),i(r.maxColor),2>m?0.5:h/(m-1)))})},initStops:function(b){this.stops=b.stops||[[0,this.options.minColor],[1,this.options.maxColor]];o(this.stops,function(e){e.color=i(e[1])})},setOptions:function(b){n.prototype.setOptions.call(this,b);this.options.crosshair=this.options.marker},setAxisSize:function(){var e=this.legendSymbol,k=this.chart,h=k.options.legend||{},g,b;e?(this.left=h=e.attr("x"),this.top=g=e.attr("y"),this.width=b=e.attr("width"),this.height=e=e.attr("height"),this.right=k.chartWidth-h-b,this.bottom=k.chartHeight-g-e,this.len=this.horiz?b:e,this.pos=this.horiz?h:g):this.len=(this.horiz?h.symbolWidth:h.symbolHeight)||this.defaultLegendLength},toColor:function(m,u){var t=this.stops,q,k,g=this.dataClasses,p,r;if(g){for(r=g.length;r--;){if(p=g[r],q=p.from,t=p.to,(void 0===q||m>=q)&&(void 0===t||m<=t)){k=p.color;u&&(u.dataClass=r,u.colorIndex=p.colorIndex);break}}}else{this.isLog&&(m=this.val2lin(m));m=1-(this.max-m)/(this.max-this.min||1);for(r=t.length;r--&&!(m>t[r][0]);){}q=t[r]||t[r+1];t=t[r+1]||q;m=1-(t[0]-m)/(t[0]-q[0]||1);k=this.tweenColors(q.color,t.color,m)}return k},getOffset:function(){var b=this.legendGroup,e=this.chart.axisOffset[this.side];b&&(this.axisParent=b,n.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=e)},setLegendColor:function(){var b,g=this.options,e=this.reversed;b=e?1:0;e=e?0:1;b=this.horiz?[b,0,e,0]:[0,e,0,b];this.legendColor={linearGradient:{x1:b[0],y1:b[1],x2:b[2],y2:b[3]},stops:g.stops||[[0,g.minColor],[1,g.maxColor]]}},drawLegendSymbol:function(m,u){var t=m.padding,q=m.options,k=this.horiz,g=B(q.symbolWidth,k?this.defaultLegendLength:12),r=B(q.symbolHeight,k?12:this.defaultLegendLength),p=B(q.labelPadding,k?16:30),q=B(q.itemDistance,10);this.setLegendColor();u.legendSymbol=this.chart.renderer.rect(0,m.baseline-11,g,r).attr({zIndex:1}).add(u.legendGroup);this.legendItemWidth=g+t+(k?q:p);this.legendItemHeight=r+t+(k?p:0)},setState:y,visible:!0,setVisible:y,getSeriesExtremes:function(){var b;this.series.length&&(b=this.series[0],this.dataMin=b.valueMin,this.dataMax=b.valueMax)},drawCrosshair:function(k,t){var r=t&&t.plotX,p=t&&t.plotY,g,q=this.pos,m=this.len;t&&(g=this.toPixels(t[t.series.colorKey]),g<q?g=q-2:g>q+m&&(g=q+m+2),t.plotX=g,t.plotY=this.len-g,n.prototype.drawCrosshair.call(this,k,t),t.plotX=r,t.plotY=p,this.cross&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.attr({fill:this.crosshair.color})))},getPlotLinePath:function(h,p,m,g,k){return z(k)?this.horiz?["M",k-4,this.top-6,"L",k+4,this.top-6,k,this.top,"Z"]:["M",this.left,k,"L",this.left-6,k+6,this.left-6,k-6,"Z"]:n.prototype.getPlotLinePath.call(this,h,p,m,g)},update:function(g,k){var h=this.chart,e=h.legend;o(this.series,function(b){b.isDirtyData=!0});g.dataClasses&&e.allItems&&(o(e.allItems,function(b){b.isDataClass&&b.legendGroup.destroy()}),h.isDirtyLegend=!0);h.options[this.coll]=d(this.userOptions,g);n.prototype.update.call(this,g,k);this.legendItem&&(this.setLegendColor(),e.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var e=this,q=this.chart,p=this.legendItems,m=q.options.legend,b=m.valueDecimals,h=m.valueSuffix||"",k;p.length||o(this.dataClasses,function(u,v){var r=!0,t=u.from,g=u.to;k="";void 0===t?k="\x3c ":void 0===g&&(k="\x3e ");void 0!==t&&(k+=s.numberFormat(t,b)+h);void 0!==t&&void 0!==g&&(k+=" - ");void 0!==g&&(k+=s.numberFormat(g,b)+h);p.push(A({chart:q,name:k,options:{},drawLegendSymbol:l.drawRectangle,visible:!0,setState:y,isDataClass:!0,setVisible:function(){r=this.visible=!r;o(e.series,function(w){o(w.points,function(x){x.dataClass===v&&x.setVisible(r)})});q.legend.colorizeItem(this,r)}},u))});return p},name:""});o(["fill","stroke"],function(b){s.Fx.prototype[b+"Setter"]=function(){this.elem.attr(b,j.prototype.tweenColors(i(this.start),i(this.end),this.pos),null,!0)}});C(c.prototype,"getAxes",function(b){var e=this.options.colorAxis;b.call(this);this.colorAxis=[];e&&new j(this,e)});C(f.prototype,"getAllItems",function(b){var g=[],e=this.chart.colorAxis[0];e&&e.options&&(e.options.showInLegend&&(e.options.dataClasses?g=g.concat(e.getDataClassLegendSymbols()):g.push(e)),o(e.series,function(h){h.options.showInLegend=!1}));return g.concat(b.call(this))});C(f.prototype,"colorizeItem",function(b,g,e){b.call(this,g,e);e&&g.legendColor&&g.legendSymbol.attr({fill:g.legendColor})})})(a);(function(d){var h=d.defined,f=d.each,c=d.noop,e=d.seriesTypes;d.colorPointMixin={isValid:function(){return null!==this.value},setVisible:function(i){var k=this,j=i?"show":"hide";f(["graphic","dataLabel"],function(g){if(k[g]){k[g][j]()}})}};d.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:c,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:e.column.prototype.pointAttribs,translateColors:function(){var j=this,n=this.options.nullColor,l=this.colorAxis,i=this.colorKey;f(this.data,function(g){var b=g[i];if(b=g.options.color||(g.isNull?n:l&&void 0!==b?l.toColor(b,g):g.color||j.color)){g.color=b}})},colorAttribs:function(g){var i={};h(g.color)&&(i[this.colorProp||"fill"]=g.color);return i}}})(a);(function(o){var j=o.colorPointMixin,c=o.each,h=o.merge,i=o.noop,l=o.pick,f=o.Series,q=o.seriesType,d=o.seriesTypes;q("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}\x3cbr/\x3e"},states:{normal:{animation:!0},hover:{halo:!1,brightness:0.2}}},h(o.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var e;d.scatter.prototype.init.apply(this,arguments);e=this.options;e.pointRange=l(e.pointRange,e.colsize||1);this.yAxis.axisPointRange=e.rowsize||1},translate:function(){var m=this.options,r=this.xAxis,p=this.yAxis,n=function(e,g,k){return Math.min(Math.max(g,e),k)};this.generatePoints();c(this.points,function(e){var b=(m.colsize||1)/2,s=(m.rowsize||1)/2,k=n(Math.round(r.len-r.translate(e.x-b,0,1,0,1)),-r.len,2*r.len),b=n(Math.round(r.len-r.translate(e.x+b,0,1,0,1)),-r.len,2*r.len),g=n(Math.round(p.translate(e.y-s,0,1,0,1)),-p.len,2*p.len),s=n(Math.round(p.translate(e.y+s,0,1,0,1)),-p.len,2*p.len);e.plotX=e.clientX=(k+b)/2;e.plotY=(g+s)/2;e.shapeType="rect";e.shapeArgs={x:Math.min(k,b),y:Math.min(g,s),width:Math.abs(b-k),height:Math.abs(s-g)}});this.translateColors()},drawPoints:function(){d.column.prototype.drawPoints.call(this);c(this.points,function(e){e.graphic.attr(this.colorAttribs(e,e.state))},this)},animate:i,getBox:i,drawLegendSymbol:o.LegendSymbolMixin.drawRectangle,alignDataLabel:d.column.prototype.alignDataLabel,getExtremes:function(){f.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;f.prototype.getExtremes.call(this)}}),j)})(a)});