(function(a){if(typeof module==="object"&&module.exports){module.exports=a}else{a(Highcharts)}}(function(a){(function(d){var i=d.merge,g=d.win,b=g.navigator,k=g.document,j=d.each,h=g.URL||g.webkitURL||g,f=/Edge\/|Trident\/|MSIE /.test(b.userAgent),c=f?150:0;d.CanVGRenderer={};function e(n,o){var m=k.getElementsByTagName("head")[0],l=k.createElement("script");l.type="text/javascript";l.src=n;l.onload=o;l.onerror=function(){console.error("Error loading script",n)};m.appendChild(l)}d.downloadURL=function(p,m){var l=k.createElement("a"),n;if(b.msSaveOrOpenBlob){b.msSaveOrOpenBlob(p,m);return}if(l.download!==undefined){l.href=p;l.download=m;l.target="_blank";k.body.appendChild(l);l.click();k.body.removeChild(l)}else{try{n=g.open(p,"chart");if(n===undefined||n===null){throw"Failed to open window"}}catch(o){g.location.href=p}}};d.svgToDataUrl=function(l){var n=b.userAgent.indexOf("WebKit")>-1&&b.userAgent.indexOf("Chrome")<0;try{if(!n&&b.userAgent.toLowerCase().indexOf("firefox")<0){return h.createObjectURL(new g.Blob([l],{type:"image/svg+xml;charset-utf-16"}))}}catch(m){}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(l)};d.imageToDataUrl=function(p,n,o,m,l,r,t,w,v){var q=new g.Image(),u,x=function(){setTimeout(function(){var z=k.createElement("canvas"),y=z.getContext&&z.getContext("2d"),B;try{if(!y){t(p,n,o,m)}else{z.height=q.height*m;z.width=q.width*m;y.drawImage(q,0,0,z.width,z.height);try{B=z.toDataURL(n);l(B,n,o,m)}catch(A){u(p,n,o,m)}}}finally{if(v){v(p,n,o,m)}}},c)},s=function(){w(p,n,o,m);if(v){v(p,n,o,m)}};u=function(){q=new g.Image();u=r;q.crossOrigin="Anonymous";q.onload=x;q.onerror=s;q.src=p};q.onload=x;q.onerror=s;q.src=p};d.downloadSVGLocal=function(s,A,u,o){var p,m,w=true,y,n=A.libURL||d.getOptions().exporting.libURL,t=k.createElement("div"),r=A.type||"image/png",l=(A.filename||"chart")+"."+(r==="image/svg+xml"?"svg":r.split("/")[1]),q=A.scale||1;n=n.slice(-1)!=="/"?n+"/":n;function x(F,E){var D=F.width.baseVal.value+2*E,B=F.height.baseVal.value+2*E,C=new g.jsPDF("l","pt",[D,B]);g.svgElementToPdf(F,C,{removeInvalid:true});return C.output("datauristring")}function z(){t.innerHTML=s;var C=t.getElementsByTagName("text"),B=t.getElementsByTagName("svg")[0].style;j(C,function(E){j(["font-family","font-size"],function(F){if(!E.style[F]&&B[F]){E.style[F]=B[F]}});E.style["font-family"]=E.style["font-family"]&&E.style["font-family"].split(" ").splice(-1)});var D=x(t.firstChild,0);d.downloadURL(D,l);if(o){o()}}if(r==="image/svg+xml"){try{if(b.msSaveOrOpenBlob){m=new MSBlobBuilder();m.append(s);p=m.getBlob("image/svg+xml")}else{p=d.svgToDataUrl(s)}d.downloadURL(p,l);if(o){o()}}catch(v){u()}}else{if(r==="application/pdf"){if(g.jsPDF&&g.svgElementToPdf){z()}else{w=true;e(n+"jspdf.js",function(){e(n+"rgbcolor.js",function(){e(n+"svg2pdf.js",function(){z()})})})}}else{p=d.svgToDataUrl(s);y=function(){try{h.revokeObjectURL(p)}catch(B){}};d.imageToDataUrl(p,r,{},q,function(B){try{d.downloadURL(B,l);if(o){o()}}catch(C){u()}},function(){var E=k.createElement("canvas"),C=E.getContext("2d"),D=s.match(/^<svg[^>]*width\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*q,B=s.match(/^<svg[^>]*height\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*q,F=function(){C.drawSvg(s,0,0,D,B);try{d.downloadURL(b.msSaveOrOpenBlob?E.msToBlob():E.toDataURL(r),l);if(o){o()}}catch(G){u()}finally{y()}};E.width=D;E.height=B;if(g.canvg){F()}else{w=true;e(n+"rgbcolor.js",function(){e(n+"canvg.js",function(){F()})})}},u,u,function(){if(w){y()}})}}};d.Chart.prototype.getSVGForLocalExport=function(A,t,v,n){var y=this,z,s=0,p,r,m,u,q,o=function(l){return y.sanitizeSVG(l,r)},x=function(l,C,B){++s;B.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",l);if(s===z.length){n(o(p.innerHTML))}};d.wrap(d.Chart.prototype,"getChartHTML",function(B){var l=B.apply(this,Array.prototype.slice.call(arguments,1));r=this.options;p=this.container.cloneNode(true);return l});y.getSVGForExport(A,t);z=p.getElementsByTagName("image");try{if(!z.length){n(o(p.innerHTML));return}for(u=0,q=z.length;u<q;++u){m=z[u];d.imageToDataUrl(m.getAttributeNS("http://www.w3.org/1999/xlink","href"),"image/png",{imageElement:m},A.scale,x,v,v,v)}}catch(w){v()}};d.Chart.prototype.exportChartLocal=function(p,q){var n=this,m=d.merge(n.options.exporting,p),o=function(){if(m.fallbackToExportServer===false){if(m.error){m.error()}else{throw"Fallback to export server disabled"}}else{n.exportChart(m)}},l=function(r){if(r.indexOf("<foreignObject")>-1&&m.type!=="image/svg+xml"){o()}else{d.downloadSVGLocal(r,m,o)}};if((f&&m.type!=="image/svg+xml"||m.type==="application/pdf")&&n.container.getElementsByTagName("image").length){o();return}n.getSVGForLocalExport(m,q,o,l)};i(true,d.getOptions().exporting,{libURL:"https://code.highcharts.com/5.0.5/lib/",buttons:{contextButton:{menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:true},{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}]}}})}(a))}));