(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(M){function K(f,l,n){var p;l.rgba.length&&f.rgba.length?(f=f.rgba,l=l.rgba,p=1!==l[3]||1!==f[3],f=(p?"rgba(":"rgb(")+Math.round(l[0]+(f[0]-l[0])*(1-n))+","+Math.round(l[1]+(f[1]-l[1])*(1-n))+","+Math.round(l[2]+(f[2]-l[2])*(1-n))+(p?","+(l[3]+(f[3]-l[3])*(1-n)):"")+")"):f=l.input||"none";return f}var u=M.noop,h=M.color,e=M.defaultOptions,L=M.each,J=M.extend,d=M.format,o=M.pick,c=M.wrap,z=M.Chart,k=M.seriesTypes,m=k.pie,s=k.column,j=M.Tick,b=M.fireEvent,i=M.inArray,g=1;L(["fill","stroke"],function(f){M.Fx.prototype[f+"Setter"]=function(){this.elem.attr(f,K(h(this.start),h(this.end),this.pos),null,!0)}});J(e.lang,{drillUpText:"\u25c1 Back to {series.name}"});e.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}};M.SVGRenderer.prototype.Element.prototype.fadeIn=function(f){this.attr({opacity:0.1,visibility:"inherit"}).animate({opacity:o(this.newOpacity,1)},f||{duration:250})};z.prototype.addSeriesAsDrilldown=function(f,l){this.addSingleSeriesAsDrilldown(f,l);this.applyDrilldown()};z.prototype.addSingleSeriesAsDrilldown=function(w,x){var r=w.series,v=r.xAxis,q=r.yAxis,n,p=[],l=[],y,f,t;t={color:w.color||r.color};this.drilldownLevels||(this.drilldownLevels=[]);y=r.options._levelNumber||0;(f=this.drilldownLevels[this.drilldownLevels.length-1])&&f.levelNumber!==y&&(f=void 0);x=J(J({_ddSeriesId:g++},t),x);n=i(w,r.points);L(r.chart.series,function(A){A.xAxis!==v||A.isDrilling||(A.options._ddSeriesId=A.options._ddSeriesId||g++,A.options._colorIndex=A.userOptions._colorIndex,A.options._levelNumber=A.options._levelNumber||y,f?(p=f.levelSeries,l=f.levelSeriesOptions):(p.push(A),l.push(A.options)))});w=J({levelNumber:y,seriesOptions:r.options,levelSeriesOptions:l,levelSeries:p,shapeArgs:w.shapeArgs,bBox:w.graphic?w.graphic.getBBox():{},color:w.isNull?(new M.Color(h)).setOpacity(0).get():h,lowerSeriesOptions:x,pointOptions:r.options.data[n],pointIndex:n,oldExtremes:{xMin:v&&v.userMin,xMax:v&&v.userMax,yMin:q&&q.userMin,yMax:q&&q.userMax}},t);this.drilldownLevels.push(w);x=w.lowerSeries=this.addSeries(x,!1);x.options._levelNumber=y+1;v&&(v.oldPos=v.pos,v.userMin=v.userMax=null,q.userMin=q.userMax=null);r.type===x.type&&(x.animate=x.animateDrilldown||u,x.options.animation=!0)};z.prototype.applyDrilldown=function(){var f=this.drilldownLevels,l;f&&0<f.length&&(l=f[f.length-1].levelNumber,L(this.drilldownLevels,function(n){n.levelNumber===l&&L(n.levelSeries,function(p){p.options&&p.options._levelNumber===l&&p.remove(!1)})}));this.redraw();this.showDrillUpButton()};z.prototype.getDrilldownBackText=function(){var f=this.drilldownLevels;if(f&&0<f.length){return f=f[f.length-1],f.series=f.seriesOptions,d(this.options.lang.drillUpText,f)}};z.prototype.showDrillUpButton=function(){var f=this,l=this.getDrilldownBackText(),p=f.options.drilldown.drillUpButton,q,n;this.drillUpButton?this.drillUpButton.attr({text:l}).align():(n=(q=p.theme)&&q.states,this.drillUpButton=this.renderer.button(l,null,null,function(){f.drillUp()},q,n&&n.hover,n&&n.select).addClass("highcharts-drillup-button").attr({align:p.position.align,zIndex:7}).add().align(p.position,!1,p.relativeTo||"plotBox"))};z.prototype.drillUp=function(){for(var x=this,y=x.drilldownLevels,v=y[y.length-1].levelNumber,w=y.length,t=x.series,p,q,n,r,l=function(f){var A;L(t,function(B){B.options._ddSeriesId===f._ddSeriesId&&(A=B)});A=A||x.addSeries(f,!1);A.type===n.type&&A.animateDrillupTo&&(A.animate=A.animateDrillupTo);f===q.seriesOptions&&(r=A)};w--;){if(q=y[w],q.levelNumber===v){y.pop();n=q.lowerSeries;if(!n.chart){for(p=t.length;p--;){if(t[p].options.id===q.lowerSeriesOptions.id&&t[p].options._levelNumber===v+1){n=t[p];break}}}n.xData=[];L(q.levelSeriesOptions,l);b(x,"drillup",{seriesOptions:q.seriesOptions});r.type===n.type&&(r.drilldownLevel=q,r.options.animation=x.options.drilldown.animation,n.animateDrillupFrom&&n.chart&&n.animateDrillupFrom(q));r.options._levelNumber=v;n.remove(!1);r.xAxis&&(p=q.oldExtremes,r.xAxis.setExtremes(p.xMin,p.xMax,!1),r.yAxis.setExtremes(p.yMin,p.yMax,!1))}}b(x,"drillupall");this.redraw();0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align();this.ddDupes.length=[]};s.prototype.supportsDrilldown=!0;s.prototype.animateDrillupTo=function(f){if(!f){var l=this,n=l.drilldownLevel;L(this.points,function(p){p.graphic&&p.graphic.hide();p.dataLabel&&p.dataLabel.hide();p.connector&&p.connector.hide()});setTimeout(function(){l.points&&L(l.points,function(q,p){p=p===(n&&n.pointIndex)?"show":"fadeIn";var r="show"===p?!0:void 0;if(q.graphic){q.graphic[p](r)}if(q.dataLabel){q.dataLabel[p](r)}if(q.connector){q.connector[p](r)}})},Math.max(this.chart.options.drilldown.animation.duration-50,0));this.animate=u}};s.prototype.animateDrilldown=function(f){var l=this,q=this.chart.drilldownLevels,r,p=this.chart.options.drilldown.animation,n=this.xAxis;f||(L(q,function(t){l.options._ddSeriesId===t.lowerSeriesOptions._ddSeriesId&&(r=t.shapeArgs,r.fill=t.color)}),r.x+=o(n.oldPos,n.pos)-n.pos,L(this.points,function(t){t.shapeArgs.fill=t.color;t.graphic&&t.graphic.attr(r).animate(J(t.shapeArgs,{fill:t.color||l.color}),p);t.dataLabel&&t.dataLabel.fadeIn(p)}),this.animate=null)};s.prototype.animateDrillupFrom=function(f){var l=this.chart.options.drilldown.animation,n=this.group,p=this;L(p.trackerGroups,function(q){if(p[q]){p[q].on("mouseover")}});delete this.group;L(this.points,function(v){var t=v.graphic,r=f.shapeArgs,q=function(){t.destroy();n&&(n=n.destroy())};t&&(delete v.graphic,r.fill=f.color,l?t.animate(r,M.merge(l,{complete:q})):(t.attr(r),q()))})};m&&J(m.prototype,{supportsDrilldown:!0,animateDrillupTo:s.prototype.animateDrillupTo,animateDrillupFrom:s.prototype.animateDrillupFrom,animateDrilldown:function(f){var l=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],q=this.chart.options.drilldown.animation,r=l.shapeArgs,p=r.start,n=(r.end-p)/this.points.length;f||(L(this.points,function(t,v){var w=t.shapeArgs;r.fill=l.color;w.fill=t.color;if(t.graphic){t.graphic.attr(M.merge(r,{start:p+v*n,end:p+(v+1)*n}))[q?"animate":"attr"](w,q)}}),this.animate=null)}});M.Point.prototype.doDrilldown=function(l,n,t){var v=this.series.chart,r=v.options.drilldown,q=(r.series||[]).length,p;v.ddDupes||(v.ddDupes=[]);for(;q--&&!p;){r.series[q].id===this.drilldown&&-1===i(this.drilldown,v.ddDupes)&&(p=r.series[q],v.ddDupes.push(this.drilldown))}b(v,"drilldown",{point:this,seriesOptions:p,category:n,originalEvent:t,points:void 0!==n&&this.series.xAxis.getDDPoints(n).slice(0)},function(f){var x=f.point.series&&f.point.series.chart,w=f.seriesOptions;x&&w&&(l?x.addSingleSeriesAsDrilldown(f.point,w):x.addSeriesAsDrilldown(f.point,w))})};M.Axis.prototype.drilldownCategory=function(f,l){var p,q,n=this.getDDPoints(f);for(p in n){(q=n[p])&&q.series&&q.series.visible&&q.doDrilldown&&q.doDrilldown(!0,f,l)}this.chart.applyDrilldown()};M.Axis.prototype.getDDPoints=function(f){var l=[];L(this.series,function(q){var r,p=q.xData,n=q.points;for(r=0;r<p.length;r++){if(p[r]===f&&q.options.data[r]&&q.options.data[r].drilldown){l.push(n?n[r]:!0);break}}});return l};j.prototype.drillable=function(){var f=this.pos,l=this.label,p=this.axis,q="xAxis"===p.coll&&p.getDDPoints,n=q&&p.getDDPoints(f);q&&(l&&n.length?(l.drillable=!0,l.basicStyles||(l.basicStyles=M.merge(l.styles)),l.addClass("highcharts-drilldown-axis-label").css(p.chart.options.drilldown.activeAxisLabelStyle).on("click",function(r){p.drilldownCategory(f,r)})):l&&l.drillable&&(l.styles={},l.css(l.basicStyles),l.on("click",null),l.removeClass("highcharts-drilldown-axis-label")))};c(j.prototype,"addLabel",function(f){f.call(this);this.drillable()});c(M.Point.prototype,"init",function(f,l,p,q){var n=f.call(this,l,p,q);q=(f=l.xAxis)&&f.ticks[q];n.drilldown&&M.addEvent(n,"click",function(r){l.xAxis&&!1===l.chart.options.drilldown.allowPointDrilldown?l.xAxis.drilldownCategory(n.x,r):n.doDrilldown(void 0,void 0,r)});q&&q.drillable();return n});c(M.Series.prototype,"drawDataLabels",function(f){var l=this.chart.options.drilldown.activeDataLabelStyle,n=this.chart.renderer;f.call(this);L(this.points,function(p){var q={};p.drilldown&&p.dataLabel&&("contrast"===l.color&&(q.color=n.getContrast(p.color||this.color)),p.dataLabel.addClass("highcharts-drilldown-data-label"),p.dataLabel.css(l).css(q))},this)});var I,e=function(f){f.call(this);L(this.points,function(l){l.drilldown&&l.graphic&&(l.graphic.addClass("highcharts-drilldown-point"),l.graphic.css({cursor:"pointer"}))})};for(I in k){k[I].prototype.supportsDrilldown&&c(k[I].prototype,"drawTracker",e)}})(a)});