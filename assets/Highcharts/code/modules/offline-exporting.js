(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(j){function k(n,h){var o=m.getElementsByTagName("head")[0],e=m.createElement("script");e.type="text/javascript";e.src=n;e.onload=h;e.onerror=function(){console.error("Error loading script",n)};o.appendChild(e)}var f=j.merge,g=j.win,l=g.navigator,m=g.document,i=j.each,d=g.URL||g.webkitURL||g,c=/Edge\/|Trident\/|MSIE /.test(l.userAgent),b=c?150:0;j.CanVGRenderer={};j.downloadURL=function(o,h){var p=m.createElement("a"),e;if(l.msSaveOrOpenBlob){l.msSaveOrOpenBlob(o,h)}else{if(void 0!==p.download){p.href=o,p.download=h,p.target="_blank",m.body.appendChild(p),p.click(),m.body.removeChild(p)}else{try{if(e=g.open(o,"chart"),void 0===e||null===e){throw"Failed to open window"}}catch(n){g.location.href=o}}}};j.svgToDataUrl=function(h){var e=-1<l.userAgent.indexOf("WebKit")&&0>l.userAgent.indexOf("Chrome");try{if(!e&&0>l.userAgent.toLowerCase().indexOf("firefox")){return d.createObjectURL(new g.Blob([h],{type:"image/svg+xml;charset-utf-16"}))}}catch(n){}return"data:image/svg+xml;charset\x3dUTF-8,"+encodeURIComponent(h)};j.imageToDataUrl=function(A,w,y,z,B,s,t,o,n){var x=new g.Image,u,e=function(){setTimeout(function(){var v=m.createElement("canvas"),r=v.getContext&&v.getContext("2d"),p;try{if(r){v.height=x.height*z;v.width=x.width*z;r.drawImage(x,0,0,v.width,v.height);try{p=v.toDataURL(w),B(p,w,y,z)}catch(q){u(A,w,y,z)}}else{t(A,w,y,z)}}finally{n&&n(A,w,y,z)}},b)},h=function(){o(A,w,y,z);n&&n(A,w,y,z)};u=function(){x=new g.Image;u=s;x.crossOrigin="Anonymous";x.onload=e;x.onerror=h;x.src=A};x.onload=e;x.onerror=h;x.src=A};j.downloadSVGLocal=function(D,C,E,G){function I(h,n){n=new g.jsPDF("l","pt",[h.width.baseVal.value+2*n,h.height.baseVal.value+2*n]);g.svgElementToPdf(h,n,{removeInvalid:!0});return n.output("datauristring")}function w(){e.innerHTML=D;var n=e.getElementsByTagName("text"),h=e.getElementsByTagName("svg")[0].style;i(n,function(p){i(["font-family","font-size"],function(q){!p.style[q]&&h[q]&&(p.style[q]=h[q])});p.style["font-family"]=p.style["font-family"]&&p.style["font-family"].split(" ").splice(-1)});n=I(e.firstChild,0);j.downloadURL(n,t);G&&G()}var z,u,s=!0,F,B=C.libURL||j.getOptions().exporting.libURL,e=m.createElement("div"),o=C.type||"image/png",t=(C.filename||"chart")+"."+("image/svg+xml"===o?"svg":o.split("/")[1]),A=C.scale||1,B="/"!==B.slice(-1)?B+"/":B;if("image/svg+xml"===o){try{l.msSaveOrOpenBlob?(u=new MSBlobBuilder,u.append(D),z=u.getBlob("image/svg+xml")):z=j.svgToDataUrl(D),j.downloadURL(z,t),G&&G()}catch(H){E()}}else{"application/pdf"===o?g.jsPDF&&g.svgElementToPdf?w():(s=!0,k(B+"jspdf.js",function(){k(B+"rgbcolor.js",function(){k(B+"svg2pdf.js",function(){w()})})})):(z=j.svgToDataUrl(D),F=function(){try{d.revokeObjectURL(z)}catch(h){}},j.imageToDataUrl(z,o,{},A,function(n){try{j.downloadURL(n,t),G&&G()}catch(h){E()}},function(){var r=m.createElement("canvas"),q=r.getContext("2d"),n=D.match(/^<svg[^>]*width\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*A,p=D.match(/^<svg[^>]*height\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*A,h=function(){q.drawSvg(D,0,0,n,p);try{j.downloadURL(l.msSaveOrOpenBlob?r.msToBlob():r.toDataURL(o),t),G&&G()}catch(v){E()}finally{F()}};r.width=n;r.height=p;g.canvg?h():(s=!0,k(B+"rgbcolor.js",function(){k(B+"canvg.js",function(){h()})}))},E,E,function(){s&&F()}))}};j.Chart.prototype.getSVGForLocalExport=function(C,A,D,E){var B=this,w,x=0,v,t,y,z,o,s=function(e,h,n){++x;n.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",e);x===w.length&&E(B.sanitizeSVG(v.innerHTML,t))};j.wrap(j.Chart.prototype,"getChartHTML",function(h){var e=h.apply(this,Array.prototype.slice.call(arguments,1));t=this.options;v=this.container.cloneNode(!0);return e});B.getSVGForExport(C,A);w=v.getElementsByTagName("image");try{if(w.length){for(z=0,o=w.length;z<o;++z){y=w[z],j.imageToDataUrl(y.getAttributeNS("http://www.w3.org/1999/xlink","href"),"image/png",{imageElement:y},C.scale,s,D,D,D)}}else{E(B.sanitizeSVG(v.innerHTML,t))}}catch(u){D()}};j.Chart.prototype.exportChartLocal=function(p,o){var q=this,h=j.merge(q.options.exporting,p),n=function(){if(!1===h.fallbackToExportServer){if(h.error){h.error()}else{throw"Fallback to export server disabled"}}else{q.exportChart(h)}};(c&&"image/svg+xml"!==h.type||"application/pdf"===h.type)&&q.container.getElementsByTagName("image").length?n():q.getSVGForLocalExport(h,o,n,function(e){-1<e.indexOf("\x3cforeignObject")&&"image/svg+xml"!==h.type?n():j.downloadSVGLocal(e,h,n)})};f(!0,j.getOptions().exporting,{libURL:"https://code.highcharts.com/5.0.5/lib/",buttons:{contextButton:{menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}]}}})})(a)});