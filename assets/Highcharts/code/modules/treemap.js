(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(i){var b=i.seriesType,e=i.seriesTypes,I=i.map,s=i.merge,l=i.extend,j=i.noop,f=i.each,o=i.grep,D=i.isNumber,h=i.pick,C=i.Series,t=i.stableSort,d=i.Color,r=function(k,g,n){var m;n=n||this;for(m in k){k.hasOwnProperty(m)&&g.call(n,k[m],m,k)}},c=function(k,g,n,m){m=m||this;k=k||[];f(k,function(u,q){n=g.call(m,n,u,q,k)});return n},p=function(k,g,m){m=m||this;k=g.call(m,k);!1!==k&&p(k,g,m)};b("treemap","scatter",{showInLegend:!1,marker:!1,dataLabels:{enabled:!0,defer:!1,verticalAlign:"middle",formatter:function(){return this.point.name||this.point.id},inside:!0},tooltip:{headerFormat:"",pointFormat:"\x3cb\x3e{point.name}\x3c/b\x3e: {point.value}\x3c/b\x3e\x3cbr/\x3e"},layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,drillUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,opacity:0.15,states:{hover:{borderColor:"#999999",brightness:e.heatmap?0:0.1,opacity:0.75,shadow:!1}}},{pointArrayMap:["value"],axisTypes:e.heatmap?["xAxis","yAxis","colorAxis"]:["xAxis","yAxis"],optionalAxis:"colorAxis",getSymbol:j,parallelArrays:["x","y","value","colorValue"],colorKey:"colorValue",translateColors:e.heatmap&&e.heatmap.prototype.translateColors,trackerGroups:["group","dataLabelsGroup"],getListOfParents:function(k,g){k=c(k,function(n,m,q){m=h(m.parent,"");void 0===n[m]&&(n[m]=[]);n[m].push(q);return n},{});r(k,function(m,n,q){""!==n&&-1===i.inArray(n,g)&&(f(m,function(u){q[""].push(u)}),delete q[n])});return k},getTree:function(){var k,g=this;k=I(this.data,function(m){return m.id});k=g.getListOfParents(this.data,k);g.nodeMap=[];k=g.buildNode("",-1,0,k,null);p(this.nodeMap[this.rootNode],function(m){var q=!1,n=m.parent;m.visible=!0;if(n||""===n){q=g.nodeMap[n]}return q});p(this.nodeMap[this.rootNode].children,function(n){var m=!1;f(n,function(q){q.visible=!0;q.children.length&&(m=(m||[]).concat(q.children))});return m});this.setTreeValues(k);return k},init:function(k,g){C.prototype.init.call(this,k,g);this.options.allowDrillToNode&&this.drillTo()},buildNode:function(x,w,v,q,u){var n=this,m=[],k=n.points[w],g;f(q[x]||[],function(y){g=n.buildNode(n.points[y].id,y,v+1,q,x);m.push(g)});w={id:x,i:w,children:m,level:v,parent:u,visible:!1};n.nodeMap[w.id]=w;k&&(k.node=w);return w},setTreeValues:function(k){var g=this,v=g.options,q=0,u=[],n,m=g.points[k.i];f(k.children,function(w){w=g.setTreeValues(w);u.push(w);w.ignore?p(w.children,function(y){var x=!1;f(y,function(z){l(z,{ignore:!0,isLeaf:!1,visible:!1});z.children.length&&(x=(x||[]).concat(z.children))});return x}):q+=w.val});t(u,function(x,w){return x.sortIndex-w.sortIndex});n=h(m&&m.options.value,q);m&&(m.value=n);l(k,{children:u,childrenTotal:q,ignore:!(h(m&&m.visible,!0)&&0<n),isLeaf:k.visible&&!q,levelDynamic:v.levelIsConstant?k.level:k.level-g.nodeMap[g.rootNode].level,name:h(m&&m.name,""),sortIndex:h(m&&m.sortIndex,-n),val:n});return k},calculateChildrenAreas:function(m,k){var x=this,v=x.options,w=this.levelMap[m.levelDynamic+1],u=h(x[w&&w.layoutAlgorithm]&&w.layoutAlgorithm,v.layoutAlgorithm),n=v.alternateStartingDirection,q=[];m=o(m.children,function(g){return !g.ignore});w&&w.layoutStartingDirection&&(k.direction="vertical"===w.layoutStartingDirection?0:1);q=x[u](k,m);f(m,function(g,y){y=q[y];g.values=s(y,{val:g.childrenTotal,direction:n?1-k.direction:k.direction});g.pointValues=s(y,{x:y.x/x.axisRatio,width:y.width/x.axisRatio});g.children.length&&x.calculateChildrenAreas(g,g.values)})},setPointValues:function(){var k=this.xAxis,g=this.yAxis;f(this.points,function(v){var q=v.node,u=q.pointValues,n,m;u&&q.visible?(q=Math.round(k.translate(u.x,0,0,0,1))-0.5,n=Math.round(k.translate(u.x+u.width,0,0,0,1))-0.5,m=Math.round(g.translate(u.y,0,0,0,1))-0.5,u=Math.round(g.translate(u.y+u.height,0,0,0,1))-0.5,v.shapeType="rect",v.shapeArgs={x:Math.min(q,n),y:Math.min(m,u),width:Math.abs(n-q),height:Math.abs(u-m)},v.plotX=v.shapeArgs.x+v.shapeArgs.width/2,v.plotY=v.shapeArgs.y+v.shapeArgs.height/2):(delete v.plotX,delete v.plotY)})},setColorRecursive:function(k,g,u){var n=this,q,m;k&&(q=n.points[k.i],m=n.levelMap[k.levelDynamic],g=h(q&&q.options.color,m&&m.color,g),u=h(q&&q.options.colorIndex,m&&m.colorIndex,u),q&&(q.color=g,q.colorIndex=u),k.children.length&&f(k.children,function(v){n.setColorRecursive(v,g,u)}))},algorithmGroup:function(k,g,n,m){this.height=k;this.width=g;this.plot=m;this.startDirection=this.direction=n;this.lH=this.nH=this.lW=this.nW=this.total=0;this.elArr=[];this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(u,q){return Math.max(u/q,q/u)}};this.addElement=function(q){this.lP.total=this.elArr[this.elArr.length-1];this.total+=q;0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH));this.elArr.push(q)};this.reset=function(){this.lW=this.nW=0;this.elArr=[];this.total=0}},algorithmCalcPoints:function(G,F,E,A){var B,z,x,y,w=E.lW,q=E.lH,v=E.plot,u,m=0,H=E.elArr.length-1;F?(w=E.nW,q=E.nH):u=E.elArr[E.elArr.length-1];f(E.elArr,function(g){if(F||m<H){0===E.direction?(B=v.x,z=v.y,x=w,y=g/x):(B=v.x,z=v.y,y=q,x=g/y),A.push({x:B,y:z,width:x,height:y}),0===E.direction?v.y+=y:v.x+=x}m+=1});E.reset();0===E.direction?E.width-=w:E.height-=q;v.y=v.parent.y+(v.parent.height-E.height);v.x=v.parent.x+(v.parent.width-E.width);G&&(E.direction=1-E.direction);F||E.addElement(u)},algorithmLowAspectRatio:function(A,z,y){var w=[],x=this,v,q={x:z.x,y:z.y,parent:z},u=0,n=y.length-1,m=new this.algorithmGroup(z.height,z.width,z.direction,q);f(y,function(g){v=g.val/z.val*z.height*z.width;m.addElement(v);m.lP.nR>m.lP.lR&&x.algorithmCalcPoints(A,!1,m,w,q);u===n&&x.algorithmCalcPoints(A,!0,m,w,q);u+=1});return w},algorithmFill:function(H,G,F){var B=[],E,A=G.direction,z=G.x,y=G.y,w=G.width,v=G.height,x,u,m,J;f(F,function(g){E=g.val/G.val*G.height*G.width;x=z;u=y;0===A?(J=v,m=E/J,w-=m,z+=m):(m=w,J=E/m,v-=J,y+=J);B.push({x:x,y:u,width:m,height:J});H&&(A=1-A)});return B},strip:function(k,g){return this.algorithmLowAspectRatio(!1,k,g)},squarified:function(k,g){return this.algorithmLowAspectRatio(!0,k,g)},sliceAndDice:function(k,g){return this.algorithmFill(!0,k,g)},stripes:function(k,g){return this.algorithmFill(!1,k,g)},translate:function(){var k,g;C.prototype.translate.call(this);this.rootNode=h(this.options.rootId,"");this.levelMap=c(this.options.levels,function(n,m){n[m.level]=m;return n},{});g=this.tree=this.getTree();this.axisRatio=this.xAxis.len/this.yAxis.len;this.nodeMap[""].pointValues=k={x:0,y:0,width:100,height:100};this.nodeMap[""].values=k=s(k,{width:k.width*this.axisRatio,direction:"vertical"===this.options.layoutStartingDirection?0:1,val:g.val});this.calculateChildrenAreas(g,k);this.colorAxis?this.translateColors():this.options.colorByPoint||this.setColorRecursive(this.tree);this.options.allowDrillToNode&&(g=this.nodeMap[this.rootNode].pointValues,this.xAxis.setExtremes(g.x,g.x+g.width,!1),this.yAxis.setExtremes(g.y,g.y+g.height,!1),this.xAxis.setScale(),this.yAxis.setScale());this.setPointValues()},drawDataLabels:function(){var k=this,g=o(k.points,function(q){return q.node.visible}),n,m;f(g,function(q){m=k.levelMap[q.node.levelDynamic];n={style:{}};q.node.isLeaf||(n.enabled=!1);m&&m.dataLabels&&(n=s(n,m.dataLabels),k._hasPointLabels=!0);q.shapeArgs&&(n.style.width=q.shapeArgs.width,q.dataLabel&&q.dataLabel.css({width:q.shapeArgs.width+"px"}));q.dlOptions=s(n,q.options.dataLabels)});C.prototype.drawDataLabels.call(this)},alignDataLabel:function(g){e.column.prototype.alignDataLabel.apply(this,arguments);g.dataLabel&&g.dataLabel.attr({zIndex:g.node.zIndex+1})},pointAttribs:function(k,g){var u=this.levelMap[k.node.levelDynamic]||{},n=this.options,q=g&&n.states[g]||{},m=k.getClassName();k={stroke:k.borderColor||u.borderColor||q.borderColor||n.borderColor,"stroke-width":h(k.borderWidth,u.borderWidth,q.borderWidth,n.borderWidth),dashstyle:k.borderDashStyle||u.borderDashStyle||q.borderDashStyle||n.borderDashStyle,fill:k.color||this.color};-1!==m.indexOf("highcharts-above-level")?(k.fill="none",k["stroke-width"]=0):-1!==m.indexOf("highcharts-internal-node-interactive")?(g=h(q.opacity,n.opacity),k.fill=d(k.fill).setOpacity(g).get(),k.cursor="pointer"):-1!==m.indexOf("highcharts-internal-node")?k.fill="none":g&&(k.fill=d(k.fill).brighten(q.brightness).get());return k},drawPoints:function(){var k=this,g=o(k.points,function(m){return m.node.visible});f(g,function(m){var n="levelGroup-"+m.node.levelDynamic;k[n]||(k[n]=k.chart.renderer.g(n).attr({zIndex:1000-m.node.levelDynamic}).add(k.group));m.group=k[n]});e.column.prototype.drawPoints.call(this);k.options.allowDrillToNode&&f(g,function(m){m.graphic&&(m.drillId=k.options.interactByLeaf?k.drillToByLeaf(m):k.drillToByGroup(m))})},drillTo:function(){var g=this;i.addEvent(g,"click",function(k){k=k.point;var n=k.drillId,m;n&&(m=g.nodeMap[g.rootNode].name||g.rootNode,k.setState(""),g.drillToNode(n),g.showDrillUpButton(m))})},drillToByGroup:function(k){var g=!1;1!==k.node.level-this.nodeMap[this.rootNode].level||k.node.isLeaf||(g=k.id);return g},drillToByLeaf:function(k){var g=!1;if(k.node.parent!==this.rootNode&&k.node.isLeaf){for(k=k.node;!g;){k=this.nodeMap[k.parent],k.parent===this.rootNode&&(g=k.id)}}return g},drillUp:function(){var g=null;this.rootNode&&(g=this.nodeMap[this.rootNode],g=null!==g.parent?this.nodeMap[g.parent]:this.nodeMap[""]);null!==g&&(this.drillToNode(g.id),""===g.id?this.drillUpButton=this.drillUpButton.destroy():(g=this.nodeMap[g.parent],this.showDrillUpButton(g.name||g.id)))},drillToNode:function(g){this.options.rootId=g;this.isDirty=!0;this.chart.redraw()},showDrillUpButton:function(k){var g=this;k=k||"\x3c Back";var q=g.options.drillUpButton,m,n;q.text&&(k=q.text);this.drillUpButton?this.drillUpButton.attr({text:k}).align():(n=(m=q.theme)&&m.states,this.drillUpButton=this.chart.renderer.button(k,null,null,function(){g.drillUp()},m,n&&n.hover,n&&n.select).attr({align:q.position.align,zIndex:7}).add().align(q.position,!1,q.relativeTo||"plotBox"))},buildKDTree:j,drawLegendSymbol:i.LegendSymbolMixin.drawRectangle,getExtremes:function(){C.prototype.getExtremes.call(this,this.colorValueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;C.prototype.getExtremes.call(this)},getExtremesFromAll:!0,bindAxes:function(){var g={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:100,dataMax:100,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};C.prototype.bindAxes.call(this);i.extend(this.yAxis.options,g);i.extend(this.xAxis.options,g)}},{getClassName:function(){var k=i.Point.prototype.getClassName.call(this),g=this.series,m=g.options;this.node.level<=g.nodeMap[g.rootNode].level?k+=" highcharts-above-level":this.node.isLeaf||h(m.interactByLeaf,!m.allowDrillToNode)?this.node.isLeaf||(k+=" highcharts-internal-node"):k+=" highcharts-internal-node-interactive";return k},isValid:function(){return D(this.value)},setState:function(g){i.Point.prototype.setState.call(this,g);this.graphic.attr({zIndex:"hover"===g?1:0})},setVisible:e.pie.prototype.pointClass.prototype.setVisible})})(a)});